---
title: Создание и удаление сети
description: Описание создания и удаления сети
---

# Создание и удаление сети

## Создание сети

### Панель управления

---

1. Перейдите в [панель управления PS Cloud](https://console.ps.kz/) и выберите услугу **Облачные серверы**.
2. Выберите название необходимого проекта и перейдите в раздел **Сети**.
3. Нажмите кнопку **Создать**.
4. Задайте параметры для сети:
   - Название сети
   - Подсеть
   - Пул адресов, которые будут доступны для создания портов в подсети. Например: `192.168.0.2`, `192.168.0.254`. В данном случае для создания портов будут доступны IP-адреса в диапазоне `192.168.0.2 - 192.168.0.254`.
   - Серверы DNS. По умолчанию указаны DNS PS.kz.
   - Маршруты, если необходимо указать статические маршруты к другим сетям.
   - DHCP. Автоматическое выделение IP-адресов при создании ВМ. По умолчанию включено.

### OpenStack CLI

---

1. Выполните [установку](/), если OpenStack CLI не установлен и пройдите [аутентификацию](/) в проекте.
2. Создайте сеть:

```
openstack network create <name>
```

Где:

- `<name>` - название подсети.

3.  В созданную сеть добавьте подсеть:

```
openstack subnet create \
--subnet-range <CIDR> \
[--dhcp  | --no-dhcp] \
--gateway <ip> \
--dns-nameserver <195.210.46.132,195.210.46.195> \
--network <network> \
<name>
```

Где:

- `<cidr>` - подсеть.
- `--dhcp` - включить DHCP
- `--no-dhcp` - выключить DHCP
- `--gateway` - IP-адрес шлюза.
- `--dns-nameserver` - cерверы DNS. По умолчанию указаны DNS PS.kz.
- `<network>` - имя или ID сети.
- `<name>` - название подсети

### Terraform

---

1. Установите Terraform.
2. Установите [OpenStack provider](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs)
3. Опишите в конфигурационном файле параметры создания локальной сети и подсети:

```
resource "openstack_networking_network_v2" "network" {
	name = "network_name"
	admin_state_up = true
}

resource "openstack_networking_subnet_v2" "subnet" {
	name = "subnet_name"
	network_id = openstack_networking_network_v2.network.id
	cidr = "192.168.10.0/24"
	enable_dhcp = true
	depends_on = [openstack_networking_network_v2.network]
}
```

Укажите:

- в ресурсе `openstack_networking_network_v2`
  - `name` - название сети
  - `admin_state_up` - `true` означает, что сеть будет активирована сразу после создания. `false`, сеть будет создана, но не будет доступна для использования до тех пор, пока его не активируют.
- в ресурсе `openstack_networking_subnet_v2`
  - `name` - название подсети
  - `network_id` - параметр указывает на ID сети, к которой привязывается создаваемая подсеть. Он использует атрибут `id` созданной ранее сети `openstack_networking_network_v2.network`.
  - `cidr` - определяет CIDR (Classless Inter-Domain Routing) для подсети. CIDR определяет диапазон IP-адресов, доступных в этой подсети.
  - `enable_dhcp` - Когда установлено значение `true`, DHCP будет включен для этой подсети.
  - `depends_on` - Это указание Terraform на то, что создание этой подсети зависит от создания сети.

## Удаление сети

> [! note] Если в подсети созданы порты, то удалить сеть будет нельзя. Необходимо [удалить порты](/) перед удалением сети.

### Панель управления

---

1. Перейдите в [панель управления PS Cloud](https://console.ps.kz/) и выберите услугу **Облачные серверы**.
2. Выберите название необходимого проекта и перейдите в раздел **Сети**.
3. Выберите необходимую сеть, откройте контекстное меню `...` и нажмите кнопку **Удалить**.

### OpenStack CLI

---

1. Выполните [установку](/), если OpenStack CLI не установлен и пройдите [аутентификацию](/) в проекте.
2. Получите список сетей:

```
openstack network list
```

3. Удалите сеть:

```
openstack network delete <network>
```

Где:

- `<network>` - имя или ID сети.
