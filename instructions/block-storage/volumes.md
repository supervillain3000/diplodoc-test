## Диски

**Диски** — это сетевое блочное устройство, обеспечивающее хранение данных и состояние ВМ. Они могут быть использованы для создания ВМ, а также могут быть подключены к ним как дополнительные для масштабирования ресурсов. 

Также из диска можно создать образ, снимок диска и резервную копию.
## Типы дисков

В облаке **PS Cloud** существуют следующие 4 типа дисков: 

| Тип диска         | Название в API  | Чтение, IOPS макс. | Чтение, МБ/с макс. | Запись, IOPS макс. | Запись, МБ/с макс. |
| ----------------- | --------------- | ------------------ | ------------------ | ------------------ | ------------------ |
| Универсальный HDD | ceph-hdd        | 320                | 200                | 160                | 100                |
| Быстрый SSD       | ceph-ssd        | 2000               | 500                | 1000               | 250                |
| Архивный HDD      | ceph-hdd-backup | 160                | 100                | 160                | 500                |
| Быстрый диск NVMе | san-nvme-h1     | 12800              | 500                | 6400               | 500                |

## Тестирование IOPS 

Измерить IOPS при чтении и записи можно с помощью утилиты `fio`

#### Linux

Установите fio используя пакетный менеджер вашей ОС.
##### Ubuntu/Debian

```
sudo apt install fio
```
##### RHEL/Derivatives

```
sudo yum install fio
```

При тестировании необходимо убедиться что диск не является загрузочным и на диск отсутствует нагрузка со стороны ОС. Можно создать и подключить пустой диск к ВМ для тестирования. 

>Важно не указывать файл для тестирования, который содержит в себе важные данные, так как во время тестирования файл перезапишется. 

Выполните команду для тестирования записи:

```
fio \
   --name=randwrite \
   --ioengine=libaio \
   --iodepth=32 \
   --rw=randwrite \
   --bs=4k \
   --direct=1 \
   --size=512M \
   --numjobs=1 \
   --runtime=240 \
   --group_reporting \
   --filename=/path/to/file
```

Если был подключен пустой диск к ВМ, в качестве `--filename` можно указать путь до подключенного диска `/dev/sdX`.

Выполните команду для тестирования чтения:

```
fio \
   --name=randread \
   --ioengine=libaio \
   --iodepth=32 \
   --rw=randread \
   --bs=4k \
   --direct=1 \
   --size=512M \
   --numjobs=1 \
   --runtime=240 \
   --group_reporting \
   --filename=/path/to/file
```

Более подробную информацию можно найти в  документации [fio](https://fio.readthedocs.io/en/latest/fio_doc.html#command-line-options)