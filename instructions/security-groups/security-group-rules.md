---
title: Создание и удаление правил группы безопасности
description: Описание создания и удаления правил группы безопасности
---

# Создание и удаление правил группы безопасности

По умолчанию, группа безопасности создается с разрешающими правилами для исходящего трафика. Весь входящий трафик запрещен до тех пор, пока не будет явно разрешен правилами группы безопасности.

## Создание правил группы безопасности

### Панель управления

---

1. Перейдите в [панель управления PS Cloud](https://console.ps.kz/) и выберите услугу **Облачные серверы**.
2. Выберите название необходимого проекта и перейдите в раздел **Группы безопасности**.
3. Нажмите на имя необходимой группы безопасности чтобы перейти в управление правилами.
4. Нажмите кнопку **Создать**.
5. Укажите параметры правила группы безопасности:
   - Тип трафика: **Входящий** или **Исходящий**
   - Тип сети: **IPv4** или **IPv6**
   - Протокол: **TCP**, **UDP**, **ICMP**
   - Порт: Порт для которого будет применятся правило.
   - IP-адрес: разрешенная подсеть для трафика. Если необходим полный доступ укажите подсеть `0.0.0.0/0`
6. Нажмите кнопку **Создать**.

### OpenStack CLI

---

1. Выполните [установку](/), если OpenStack CLI не установлен и пройдите [аутентификацию](/) в проекте.
2. Получите список групп безопаности:

```
openstack security group list
```

3. Добавьте правило в новую группу безопасности:

```
openstack security group rule create <name> \
--protocol <procotol> --dst-port <port> --remote-ip <ip> \
--ingress/engress
```

Где:

- `<name>` - имя группы безопасности или ID.
- `<protocol>` - укажите по какому протоколу необходимо добавить правило. Возможно указать следующие значения:
  - `[None, 'ah', 'dccp', 'egp', 'esp', 'gre', 'hopopt', 'icmp', 'igmp', 'ip', 'ipip', 'ipv6-encap', 'ipv6-frag', 'ipv6-icmp', 'icmpv6', 'ipv6-nonxt', 'ipv6-opts', 'ipv6-route', 'ospf', 'pgm', 'rsvp', 'sctp', 'tcp', 'udp', 'udplite', 'vrrp', 'any']`
  - Для разрешения всех протоколов укажите `any`.
- `<port>` - номер порта, для которого будет применено правило, например 80: `--dst-port 80`
- `<ip>` - подсеть, для которой будет применено правило. Если не указывать данный параметр, то по умолчанию будет применено значение `0.0.0.0/0`, что означает для всех IP адресов.

4. Проверить созданные правила, Вы можете при помощи команды:

```
openstack security group rule list <name>
```

Где:

- `<name>` - имя группы безопасности или ID.

## Удаление правила группы безопасности

### Панель управления

---

1. Перейдите в [панель управления PS Cloud](https://console.ps.kz/) и выберите услугу **Облачные серверы**.
2. Выберите название необходимого проекта и перейдите в раздел **Группы безопасности**.
3. Нажмите на имя необходимой группы безопасности чтобы перейти в управление правилами.
4. Выберите правило группы безопасности, которую необходимо удалить и откройте контекстное меню `...` правила.
5. Нажмите кнопку **Удалить**.

### OpenStack CLI

---

1. Выполните [установку](/), если OpenStack CLI не установлен и пройдите [аутентификацию](/) в проекте.
2. Получите список групп безопаности:

```
openstack security group list
```

3. Получите список правил для группы безопасности:

```
openstack security group rule list <name>
```

Где:

- `<name>` - имя или ID группы безопасности.

4. Удалите правило:

```
openstack security group rule delete <id>
```

Где:

- `<id>`- ID правила группы безопасности.

### Terraform

```hcl
resource "openstack_networking_secgroup_v2" "secgroup_1" {
  name        = "secgroup_1"
  description = "My neutron security group"
}

resource "openstack_networking_secgroup_rule_v2" "secgroup_rule_1" {
  direction         = "ingress"
  ethertype         = "IPv4"
  protocol          = "tcp"
  port_range_min    = 22
  port_range_max    = 22
  remote_ip_prefix  = "0.0.0.0/0"
  security_group_id = openstack_networking_secgroup_v2.secgroup_1.id
}
```
