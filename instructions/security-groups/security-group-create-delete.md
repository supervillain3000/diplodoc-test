---
title: Создание и удаление группы безопасности
description: Описание создания и удаления группы безопасности
---

# Создание и удаление группы безопасности

## Создание группы безопасности

**Группы безопасности** - это механизм для контроля трафика сети виртуальных машин. Группы безопасности позволяют определить, какие типы сетевого трафика разрешены или запрещены для определенных экземпляров виртуальных машин. Правила **группы безопасности** используются для фильтрации трафика на уровне экземпляров виртуальных машин. Например, можно настроить правила для разрешения входящего SSH-трафика или блокировки всего трафика, кроме HTTP и HTTPS.

### Панель управления

---

1. Перейдите в [панель управления PS Cloud](https://console.ps.kz/) и выберите услугу **Облачные серверы**.
2. Выберите название необходимого проекта и перейдите в раздел **Группы безопасности**.
3. Нажмите кнопку **Создать**.
4. Укажите **Название** и **Описание** для группы безопасности.
5. После создания группы безопасности нажмите на название группы безопасности в разделе **Группы безопасности**. Откроется управление правилами группой безопасности.
6. По умолчанию, группа безопасности создается с разршающими исходящими правилами для IPv4 и IPv6.
7. [Создайте правила группы безопасности](security-group-rules.md).

### OpenStack CLI

---

1. Выполните [установку](/), если OpenStack CLI не установлен и пройдите [аутентификацию](/) в проекте.
2. Создайте группу безпосности при помощи следующей команды:

```
openstack security group create <name> --description <description>
```

Где:

- `<name>` - название группы безопасности.
- `<description>` - описание группы безопасности.

3. [Создайте правила группы безопасности](security-group-rules.md).

### Terraform

---

Если у вас еще нет Terraform, [установите его и настройте провайдер Openstack](https://github.com/supervillain3000/docs/blob/master/ru/compute/instructions/compute)

1. Опишите в конфигурационном файле параметры создания и правила группы безопаности:

```hcl
resource "openstack_networking_secgroup_v2" "secgroup_1" {
  name        = "secgroup_1"
  description = "My neutron security group"
}
```

2. Создайте [правила для группы безопасности](security-group-rules.md).

Пример группы безопасности, правила для которого создаются вместе с группой безопасности:

```
resource "openstack_compute_secgroup_v2" "security_group" {
	name = "my_security_group"
	description = "open ssh and http"
	dynamic "rule" {
		for_each = ["22", "80"]
		content {
			from_port = rule.value
			to_port = rule.value
			ip_protocol = "tcp"
			cidr = "0.0.0.0/0"
		}
	}
	rule {
		from_port = -1
		to_port = -1
		ip_protocol = "icmp"
		cidr = "0.0.0.0/0"
	}
}
```

Где:

- `name` - определяет имя создаваемой группы безопасности.
- `description` - (опционально) описание группы безопасности.
- `dynamic "rule"` - Такой блок Вы можете использовать для динамического создания одинаковых правил для разных портов.
  - `for_each = ["22", "80"]` - Это указывает Terraform на то, что для каждого элемента в списке (в данном случае портов 22 и 80) нужно создать соответствующее правило безопасности.
  - `content` - Начало описания содержимого правила безопасности.
  - `from_port = rule.value` - Это атрибут правила безопасности, который определяет начальный порт диапазона портов. `rule.value` здесь _22_
  - `to_port = rule.value` - Это атрибут правила безопасности, который определяет порт диапазона портов. `rule.value` здесь
  - `ip_protocol = "tcp"` - атрибут правила безопасности, который определяет протокол, для которого будет применено правило. В данном случае используется TCP.
  - `cidr = "0.0.0.0/0"` - атрибут правила безопасности, который определяет диапазон IP-адресов, к которым будет применено правило. В данном случае указан диапазон "0.0.0.0/0", что означает, что правило будет применяться ко всем IP-адресам.
- `rule` - статическое правило безопасности, если Вам необходимо правило для одного порта, или для всех сразу ( со значением -1)
  - `from_port` и `to_port` - используются для определения начального и конечного порта диапазона. Если указать -1 будет использоваться для всех портов.
  - `cidr = "0.0.0.0/0"` - атрибут правила безопасности, который определяет диапазон IP-адресов, к которым будет применено правило. В данном случае указан диапазон "0.0.0.0/0", что означает, что правило будет применяться ко всем IP-адресам.

## Удаление группы безопасности

> [! note] Удалить группу безопасности, которая подключена к ВМ нельзя. Перед удалением необходимо [отключить группу безопасности от ВМ](security-group-attach-detach).

### Панель управления

---

1. Перейдите в [панель управления PS Cloud](https://console.ps.kz/) и выберите услугу **Облачные серверы**.
2. Выберите название необходимого проекта и перейдите в раздел **Группы безопасности**.
3. Откройте контекстное меню `...` группы безопасности и нажмите кнопку **Удалить**.

### OpenStack CLI

---

1. Выполните [установку](/), если OpenStack CLI не установлен и пройдите [аутентификацию](/) в проекте.
2. Получите список групп безопасности:

```
openstack security group list
```

3. Удалите группу безопасности:

```
openstack security group delete <name>
```

Где:

- `<name>` - название группы безопасности или ID.
